<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>Task-Manager</title>
    <link rel="stylesheet" href="../../../css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../css/cayman.min.css">
    <link rel="stylesheet" href="../../../css/prism.min.css">
    <link rel="stylesheet" href="../../../css/index.min.css">
    <link rel="stylesheet" href="../../../css/docs.min.css">
    <link rel="stylesheet" href="../../../css/bootstrap-responsive.min.css">
</head>

<body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container"><a class="brand">Mr. Doc</a>
                <div class="nav-collapse collapse">
                    <ul class="nav pull-right sponsored"></ul>
                </div>
            </div>
        </div>
    </div>
    <header id="overview" class="jumbotron subhead">
        <div class="container">
            <h1>Task-Manager</h1>
            <p class="lead"></p>
        </div>
    </header>
    <div class="container">
        <div class="row">
            <div class="span3 bs-docs-sidebar">
                <ul class="nav nav-list bs-docs-sidenav affix-top">
                    <li><a href="../../../index.html">Main</a></li>
                    <li><a href="../../../webpack.config.js.html">webpack.config.js</a></li>
                    <li><a href="../../../app/app.module.js.html">app/app.module.js</a></li>
                    <li><a href="../../../app/app.route.js.html">app/app.route.js</a></li>
                    <li><a href="../../../app/required-files.js.html">app/required-files.js</a></li>
                    <li><a href="../../../app/task/controller/index.js.html">app/task/controller/index.js</a></li>
                    <li><a href="../../../app/task/controller/task-create-update-modal.controller.js.html">app/task/controller/task-create-update-modal.controller.js</a></li>
                    <li><a href="../../../app/task/controller/task.controller.js.html">app/task/controller/task.controller.js</a></li>
                    <li><a href="../../../app/task/service/index.js.html">app/task/service/index.js</a></li>
                    <li class="active"><a href="../../../app/task/service/task.service.js.html">app/task/service/task.service.js</a></li>
                    <li><a href="../../../app/task/task.module.js.html">app/task/task.module.js</a></li>
                </ul>
                <div class="scrollspy">
                    <ul class="nav nav-list bs-docs-sidenav affix-top">
                    </ul>
                </div>
            </div>
            <div class="span9">
                <div class="description">
                    <p>It's the core service where all the CRUD operation's are implemented.</p>
                    <pre>
                        <code>var ref = firebase.database().ref('tasks');
                        </code>
                    </pre>
                    <span>Reference of Firebase database named 'tasks' is stored in ref variable</span>
                    <pre>
                        <code>
                            var tasks = $firebaseArray(ref); //get data
                        </code>
                    </pre> Referenced data is stored in tasks variale.

                    <pre><code>getAllTasks</code></pre> <span>:Used to get data when it's loaded.</span>
                    <pre><code>addNewTask</code></pre> <span>:Used to save new task in DB and shows a angular material toast message on success.</span>

                    <pre><code>updateTask</code></pre> <span>:Used to update a specific task in DB and shows a angular material toast message on success.</span>

                    <pre><code>removeTask</code></pre> <span>:Used to remove a specific task from DB and shows a angular material toast message on success.</span>
                </div>
                <pre><code class="language-javascript">(function(angular) {
    'use strict';
    angular
        .module('taskApp')
        .service('taskService', TaskService);
    TaskService.$inject = ['$q', '$firebaseArray', '$mdToast', '$mdDialog'];

    function TaskService($q, $firebaseArray, $mdToast, $mdDialog) {
        var TaskService = this;
        TaskService.getAllTasks = getAllTasks;
        TaskService.addNewTask = addNewTask;
        TaskService.updateTask = updateTask;
        TaskService.removeTask = removeTask;

        var ref = firebase.database().ref('tasks');
        //var ref = ref.child(1);
        var tasks = $firebaseArray(ref); //get data

        function getAllTasks() {
            var deferred = $q.defer();
            tasks.$loaded().then(function(response) {
                if (response)
                    deferred.resolve(tasks);
            }, function(reject) {
                deferred.reject(reject);
            });

            return deferred.promise;
        }

        function addNewTask(task) {
            task.dateCreated = firebase.database.ServerValue.TIMESTAMP;
            task.dateUpdated = firebase.database.ServerValue.TIMESTAMP;

            $firebaseArray(ref).$add(task).then(function(response) {
                console.log(response);
                $mdDialog.cancel();
                $mdToast.show(
                    $mdToast.simple()
                    .textContent('Task Added Successfully!')
                    .position('bottom right')
                    .hideDelay(1000)
                );
            }, function(error) {
                console.log(error);
            });
        }

        function updateTask(task) {
            var refForUpdate = firebase.database().ref('tasks/' + task.$id);
            refForUpdate.update({
                name: task.name,
                description: task.description,
                dateUpdated: firebase.database.ServerValue.TIMESTAMP
            }).then(function(response) {
                console.log('Updated');
                $mdDialog.cancel();

                $mdToast.show(
                    $mdToast.simple()
                    .textContent('Task Updated Successfully!')
                    .position('bottom right')
                    .hideDelay(1000)
                );
            }, function(error) {
                console.error(error);
            });
        }

        function removeTask(task) {
            tasks.$remove(task).then(function() {
                console.log('Deleted');
                $mdToast.show(
                    $mdToast.simple()
                    .textContent('Task Removed Successfully!')
                    .position('bottom right')
                    .hideDelay(1000)
                );
            }, function() {

            });
        }
    }
})(window.angular);</code></pre>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="container">
            <p>Documentation generated with <a href="https://github.com/mr-doc/mr-doc">Mr. Doc </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
            <p>Mr. Doc is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des rÃ©seaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
            <p>Theme borrowed from Twitter Bootstrap</p>
        </div>
    </footer>
    <script src="../../../js/twitter-widget.min.js"></script>
    <script src="../../../js/jquery.min.js"></script>
    <script src="../../../js/bootstrap-transition.min.js"></script>
    <script src="../../../js/bootstrap-scrollspy.min.js"></script>
    <script src="../../../js/bootstrap-dropdown.min.js"></script>
    <script src="../../../js/bootstrap-collapse.min.js"></script>
    <script src="../../../js/bootstrap-affix.min.js"></script>
    <script src="../../../js/prism.min.js"></script>
    <script src="../../../js/index.min.js"></script>
</body>

</html>